# fatturazione-elettronica-aruba

## This project is work in progress

Module to easily integrate the Aruba API for electronic invoicing ("Fatturazione Elettronica") with your project.

## Roadmap

-   Add upload invoice

## Links

**Aruba API docs**

<https://fatturazioneelettronica.aruba.it/apidoc/docs.html>

## Examples

Connecting to the demo environment and searching for all invoices:

```javascript
const ArubaClient = require('fatturazione-elettronica-aruba');

const username = process.env.ARUBA_USERNAME;
const password = process.env.ARUBA_PASSWORD;

(async () => {
  const arubaClient = new ArubaClient({ env: 'demo' });

  const auth = await arubaClient.signIn({ username, password });

  if (auth && auth.error) {
    console.log('Cannot sign in', auth);
  }

  // You are signed in now

  await arubaClient.refreshToken(); // because why not

  // Search for all the invoices sent by my user
  const find = await arubaClient.searchInvoice({
    type: 'sent',
    findBy: 'username',
    username,
    size: 20 // page size
  });

  console.log(find.data.content); // array of invoices
})();
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [ArubaClient](#arubaclient)
    -   [Parameters](#parameters)
    -   [signIn](#signin)
        -   [Parameters](#parameters-1)
    -   [refreshToken](#refreshtoken)
    -   [searchInvoice](#searchinvoice)
        -   [Parameters](#parameters-2)
    -   [getInvoiceNotifications](#getinvoicenotifications)
        -   [Parameters](#parameters-3)

### ArubaClient

ArubaClient constructor

#### Parameters

-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?**
    -   `options.env` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Aruba environment (demo or prod)

Returns **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Returns an instance of ArubaClient

#### signIn

Calls Aruba to generate a JWT that will be used for future calls

##### Parameters

-   `data` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)**
    -   `data.username` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Aruba username
    -   `data.password` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Aruba password

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Resolves to an boolean if successful, or an object
                   containing the error message

#### refreshToken

Calls Aruba to refresh the JWT

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Resolves to an boolean if successful, or an object
                   containing the error message

#### searchInvoice

Search an invoice by username, filename, or id

##### Parameters

-   `data`   (optional, default `{}`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Resolves to an boolean if successful, or an object
                   containing the error message

#### getInvoiceNotifications

Get the invoice notifications

##### Parameters

-   `data`   (optional, default `{}`)

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)** Resolves to an boolean if successful, or an object
                   containing the error message
